<main> 
    <!-- name -->
    <section class="name flex-row">
        
        <span class="border flex-col">
            <span data-i18n="name" >Name</span>
            <input class="bold" type="text" name="attr_character_name" />
        </span>
        <span class="border flex-col">
            <span data-i18n="heritage" >heritage</span>
            <input name="attr_heritage" type="text" list="heritage" value=""/>
        </span>
        <span class="border flex-col">
            <span data-i18n="endurance" >endurance</span>
            <input name="attr_endurance" type="number" value=""/>
        </span>
        <span class="border flex-col">
            <span data-i18n="lifeblood" >lifeblood</span>
            <input name="attr_lifeblood" type="number" value=""/>
        </span>
        <span class="border flex-col pad">
            <span data-i18n="fatigued-" >Fatigued?</span>
            <input name="attr_fatigue" type="checkbox" value="1"/>
        </span>

        <span class="border pad">
            <span data-i18n="hero-points" >hero points</span>
            <input name="attr_heropoints" type="number" value=""/>
        </span>
        <span class="border flex-col">
            <span data-i18n="player">Player</span>
            <input name="attr_player_name" type="text" value=""/>
        </span>
    </section>

    <section class="skills flex-col">
        <label data-i18n="skills" >skills</label>
        <div class="section flex-row">
            <input type="number" name="attr_combat" class="txtfield warn-missing" value="" placeholder="0">
            <button name="roll_combat" class="blank" type="roll" value="&{template:rolls} {{title=combat}} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}=[[ [[2d6]]+@{combat} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="combat" >combat</span></button>
        </div>
        <div class="section flex-row">
            <input type="number" name="attr_craft" class="txtfield warn-missing" value="" placeholder="0">
            <button name="roll_craft" class="blank" type="roll" value="&{template:rolls} {{title=craft}} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[ [[2d6]]+@{craft} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="craft" >craft</span></button>
        </div>
        <div class="section flex-row">
            <input type="number" name="attr_lore" class="txtfield warn-missing" value="" placeholder="0">
            <button name="roll_lore" class="blank" type="roll" value="&{template:rolls} {{title=lore}} {{color=black}} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[ [[2d6]]+@{lore} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="lore" >lore</span></button>
        </div>
        <div class="section flex-row">
            <input type="number" name="attr_physical" class="txtfield" value="" placeholder="0">
            <button name="roll_physical" class="blank" type="roll" value="&{template:rolls} {{title=Physical}}  {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[ [[2d6]]+@{physical} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="physical" >physical</span></button>
        </div>
        <div class="section flex-row">
            <input type="number" name="attr_social" class="txtfield warn-missing" value="" placeholder="0">
            <button name="roll_social" class="blank" type="roll" value="&{template:rolls} {{title=social}} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[ [[2d6]]+@{social} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="social" >social</span></button>
        </div>
        <div class="section flex-row">
            <input type="number" name="attr_sorcery" class="txtfield warn-missing" value="" placeholder="0">
            <button name="roll_sorcery" class="blank" type="roll" value="&{template:rolls} {{title=sorcery}} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[ [[2d6]]+@{sorcery} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="sorcery" >sorcery</span></button>
        </div>
        <div class="section flex-row">
            <input type="number" name="attr_stealth" class="txtfield warn-missing" value="" placeholder="0">
            <button name="roll_stealth" class="blank" type="roll" value="&{template:rolls} {{title=stealth}} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[ [[2d6]]+@{stealth} ]]}} {{baseroll=$[[0]]}}"><span data-i18n="stealth" >stealth</span></button>
        </div>
    </section>

    <section class="border traits">
        <label for="" data-i18n="traits" >traits</label>
        <textarea name="attr_traits" value=""/></textarea>
    </section>

    <section class="combat">
        
        <div class="flex-row section">
            <button name="roll_" class="d6" type="roll" value="&{template:rolls} {{title=^{initiative} }} {{subtitle=@{character_name} }} {{color=black}} {{^{roll-i18n}[[2d6+(@{combat} &{tracker}]]}}" ><span data-i18n="initative" >Initiative</span></button>
            <div class="armor border">
                <label for="" data-i18n="armor" >armor</label>
                <input name="attr_armorname" type="text" value=""/>
                <input name="attr_armor" type="number" value=""/>
            </div>
        </div>

        <div class="border grid-weapon">
            <span></span>
            <span data-i18n="weapons" >weapons</span>
            <span data-i18n="range" >range</span>
            <span data-i18n="damage" class="damage">damage</span>
            <span data-i18n="notes" >notes</span>

            <button name="roll_weapon1" class="d6" type="roll" value="&{template:rolls} {{title=^{weapon}: @{wpn1name} }} {{color=black}} {{subtitle=@{character_name} }} {{color=black}} {{^{range}= @{wpn1range} }}  {{^{roll-i18n}=[[ [[2d6]]+@{combat} ]]}} {{baseroll=$[[0]]}} {{^{damage}= [[@{wpn1dmg}6]] }}"></button>
            <input name="attr_wpn1name" class="weapon-name" type="text" value=""/>
            <input name="attr_wpn1range" class="dmg" type="text" value=""/>
            <input name="attr_wpn1dmg" class="dmg" placeholder="2d" type="text" value=""/>
            <input name="attr_wpn1notes" class="weapon-notes" type="text" value=""/>

            <button name="roll_weapon2" class="d6" type="roll" value="&{template:rolls} {{title=^{weapon}: @{wpn2name} }} {{color=black}} {{subtitle=@{character_name} }} {{color=black}} {{^{range}= @{wpn2range} }}  {{^{roll-i18n}[[ [[2d6]]+@{combat} ]]}} {{baseroll=$[[0]]}} {{^{damage}= [[@{wpn2dmg}6]] }}"></button>
            <input name="attr_wpn2name" class="weapon-name" type="text" value=""/>
            <input name="attr_wpn2range" class="dmg" type="text" value=""/>
            <input name="attr_wpn2dmg" class="dmg" placeholder="2d" type="text" value=""/>
            <input name="attr_wpn2notes" class="weapon-notes" type="text" value=""/>

            <button name="roll_weapon3" class="d6" type="roll" value="&{template:rolls} {{title=^{weapon}: @{wpn3name} }} {{color=black}} {{subtitle=@{character_name} }} {{color=black}} {{^{range}= @{wpn3range} }}  {{^{roll-i18n}[[ [[2d6]]+@{combat} ]]}} {{baseroll=$[[0]]}} {{^{damage}= [[@{wpn3dmg}6]] }}"></button>
            <input name="attr_wpn3name" class="weapon-name" type="text" value=""/>
            <input name="attr_wpn3range" class="dmg" type="text" value=""/>
            <input name="attr_wpn3dmg" class="dmg" placeholder="2d" type="text" value=""/>
            <input name="attr_wpn3notes" class="weapon-notes" type="text" value=""/>

            <button name="roll_weapon4" class="d6" type="roll" value="&{template:rolls} {{title=^{weapon}: @{wpn4name} }} {{color=black}} {{subtitle=@{character_name} }} {{color=black}} {{^{range}= @{wpn4range} }}  {{^{roll-i18n}[[ [[2d6]]+@{combat} ]]}} {{baseroll=$[[0]]}} {{^{damage}= [[@{wpn4dmg}6]] }}"></button>
            <input name="attr_wpn4name" class="weapon-name" type="text" value=""/>
            <input name="attr_wpn4range" class="dmg" type="text" value=""/>
            <input name="attr_wpn4dmg" class="dmg" placeholder="2d" type="text" value=""/>
            <input name="attr_wpn4notes" class="weapon-notes" type="text" value=""/>

            <button name="roll_weapon5" class="d6" type="roll" value="&{template:rolls} {{title=^{weapon}: @{wpn5name} }} {{color=black}} {{subtitle=@{character_name} }} {{color=black}} {{^{range}= @{wpn5range} }}  {{^{roll-i18n}[[ [[2d6]]+@{combat} ]]}} {{baseroll=$[[0]]}} {{^{damage}= [[@{wpn5dmg}6]] }}"></button>
            <input name="attr_wpn5name" class="weapon-name" type="text" value=""/>
            <input name="attr_wpn5range" class="dmg" type="text" value=""/>
            <input name="attr_wpn5dmg" class="dmg" placeholder="2d" type="text" value=""/>
            <input name="attr_wpn5notes" class="weapon-notes" type="text" value=""/>
        </div>

    </section>
    <section class="border equip">
        <label for="" data-i18n="equipment" >equipment</label>
        <textarea name="attr_equipment" value=""/></textarea>
    </section>

    <section class="border sorcery">
        <label for="" data-i18n="sorcery-notes" >sorcery/notes</label>
        <textarea name="attr_sorcery" value=""/></textarea>
    </section>

    <section class="xp flex-col">
        <label data-i18n="xp">XP</label>
        <span data-i18n="experienced">experienced</span>
        <div>
            <input type="checkbox" name="attr_experienced1" value="1">
            <input type="checkbox" name="attr_experienced2" value="1"> 
            <input type="checkbox" name="attr_experienced3" value="1"> 
            <input type="checkbox" name="attr_experienced4" value="1"> 
            <input type="checkbox" name="attr_experienced5" value="1"> 
        </div>
        <span data-i18n="expert">expert</span>
        <div>
            <input type="checkbox" name="attr_expert1" value="1">
            <input type="checkbox" name="attr_expert2" value="1">
            <input type="checkbox" name="attr_expert3" value="1">
            <input type="checkbox" name="attr_expert4" value="1">
            <input type="checkbox" name="attr_expert5" value="1">
        </div>
        <span data-i18n="master">master</span>
        <div>
            <input type="checkbox" name="attr_master1" value="1">
            <input type="checkbox" name="attr_master2" value="1">
            <input type="checkbox" name="attr_master3" value="1">
            <input type="checkbox" name="attr_master4" value="1">
            <input type="checkbox" name="attr_master5" value="1"> 
        </div>
        <span data-i18n="grandmster">grandmster</span>
        <div>
            <input type="checkbox" name="attr_grandmaster1" value="1">
            <input type="checkbox" name="attr_grandmaster2" value="1">
            <input type="checkbox" name="attr_grandmaster3" value="1">
            <input type="checkbox" name="attr_grandmaster4" value="1"> 
            <input type="checkbox" name="attr_grandmaster5" value="1">
        </div>
        <span data-i18n="legend">legend</span>
        <div>
            <input type="checkbox" name="attr_legend1" value="1">
            <input type="checkbox" name="attr_legend2" value="1">
            <input type="checkbox" name="attr_legend3" value="1">
            <input type="checkbox" name="attr_legend4" value="1">
            <input type="checkbox" name="attr_legend5" value="1">
        </div>
    </section>
</main>

<datalist id="heritage">
    <option value="Human"></option>
    <option value="Anunaki"></option>
    <option value="Apefolk"></option>
    <option value="Dwarf"></option>
    <option value="Elf"></option>
    <option value="Geckofolk"></option>
    <option value="Lizardfolk"></option>
</datalist>

<!-- ROLL TEMPLATE -->

<rolltemplate class="sheet-rolltemplate-rolls">
  <div class="sheet-container sheet-color-{{color}}">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title subtitle desc color baseroll}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title subtitle desc color baseroll}}
      {{#rollTotal() baseroll 2}}
        <div class="sheet-fail">Critical Fumble!</div>
      {{/rollTotal() baseroll 2}}
      {{#rollTotal() baseroll 12}}
        <div class="sheet-crit">Critical Success!</div>
      {{/rollTotal() baseroll 12}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<!--  
// Translation key replacement, didn't work
<input name="attr_fumble_i18n" type="hidden" value="fumble">
<input name="attr_success_i18n" type="hidden" value="crit success">

<script type="text/worker">
on("sheet:opened", function(eventInfo){
    setAttrs({
        fumble_i18n: getTranslationByKey("critical-fumble"),
        success_i18n: getTranslationByKey("critical-success")
    });     
});
</script>
-->